<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="finalhorse.repository.UserDao">
	<resultMap type="user" id="userSchResult" />
	<select id="listUser" resultMap="userSchResult">
		SELECT * FROM (
				SELECT ROWNUM RANK, A.* FROM (
				SELECT * FROM PLAYER_INFO A ORDER BY CURMONEY DESC) A
				) 
				WHERE 1=1
				AND RANK <![CDATA[ <= ]]> 10 
	</select>
	<select id="searchUser" resultMap="userSchResult" parameterType="userSch">
		SELECT * FROM (
				SELECT ROWNUM RANK, A.* FROM (
				SELECT * FROM PLAYER_INFO A ORDER BY CURMONEY DESC) A
				) 
				WHERE 1=1
				AND RANK <![CDATA[ <= ]]> 10 
				<if test="pname!=null and pname!=''">
					PNAME LIKE '%' || #{pname} '%' || 
				</if>
	</select>
</mapper>